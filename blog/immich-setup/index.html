<!doctype html><html lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1,viewport-fit=cover" name=viewport><title>My Immich setup feat. NixOS</title><meta content="steen's online burrow" name=description><meta content=Zola name=generator><meta content=strict-origin name=referrer><link href=https://sgt.hootr.club/assets/style.css rel=stylesheet><link title="RSS feed" href=/rss.xml rel=alternate type=application/rss+xml><link title="Atom feed" href=/atom.xml rel=alternate type=application/atom+xml><link href=/assets/icon/favicon-152.png rel=apple-touch-icon-precomposed><body class=main-parent><div class=main-parent><header class=main><h1 class=header-title><a href=https://sgt.hootr.club>STEENSBURROW</a></h1><nav><ul class=unstyled><li><a class=unstyled href=https://sgt.hootr.club/me/>me</a><li><a class=unstyled href=https://sgt.hootr.club/blog/>posts</a><li><a class=unstyled href=/rss.xml>rss</a><li><a class=unstyled href=https://sgt.hootr.club/meta/>meta</a></ul></nav></header><main class=main><article><header><h1 class=title>My Immich setup feat. NixOS</h1><p class=subtitle>Published by <a href=/><i>steen</i></a> on <time datetime=2025-10-03>2025-10-03</time> tagged <a class=tag href=https://sgt.hootr.club/tags/nix/>#nix</a> <a class=tag href=https://sgt.hootr.club/tags/immich/>#immich</a></header><div class=content><p><a rel="nofollow noreferrer external" class=external-link href=https://github.com/immich-app/immich/releases/tag/v2.0.0>Immich reached a stable release!</a> I started using it several months ago and I've been having a very pleasant experience with it, so I figured I could write a few lines about it.<p><a rel="nofollow noreferrer external" class=external-link href=https://immich.app/>Immich</a> is an open source self-hosted replacement for Google Photos and other similar paid services. It has a very polished web UI and mobile apps. This is what it looks like:<p><img alt="A screenshot of my instance of Immich, featuring photos of my keycaps, my newly installed kitchen knife rack, and some pigeons sleeping on a power line" src=https://sgt.hootr.club/blog/immich-setup/ui.png><p>Basically you slap it on your home server, upload your photos, and you get all the good parts of a photo hosting service without selling your soul and throwing away your privacy! <em>For free!!</em> Free unless you're counting hardware and electricity bills that is, but then again, once you have a home server to run Immich you can use it to run <a rel="nofollow noreferrer external" class=external-link href=https://www.navidrome.org/>all</a> <a rel="nofollow noreferrer external" class=external-link href=https://transmissionbt.com/>sorts</a> <a rel="nofollow noreferrer external" class=external-link href=https://jellyfin.org/>of</a> <a rel="nofollow noreferrer external" class=external-link href=https://syncthing.net/>cool</a> <a rel="nofollow noreferrer external" class=external-link href=https://github.com/dani-garcia/vaultwarden>software</a>.<p>It is licensed under the AGPL and the people behind <a rel="nofollow noreferrer external" class=external-link href=https://futo.org/>the company that maintains it</a> seem to have a strong commitment to privacy and open source. Immich uses several (optional) ML-powered features like facial recognition, contextual search, and duplicate detection, all of which run locally. (This is what I like to call <em>"one of the few useful uses of AI."</em>) As far as I can tell, Immich does not "phone home" or contact the external world on its own.<p>If you snoop around on the website you'll see a "<a rel="nofollow noreferrer external" class=external-link href=https://buy.immich.app/>Purchase</a>" link, and you'd be forgiven for thinking that this is a Freemium™ product that paywalls some features. But it's not! If you "buy" Immich all you get is a badge showing that you're a supporter on the web UI. You'll notice that I have the badge in my screenshot: I was so impressed with Immich after using it for a few weeks that I figured I should show my support in some way. For the 2.0.0 release they've also started selling some branded clothes and <a rel="nofollow noreferrer external" class=external-link href=https://immich.store/en-eur/products/immich-retro>an actual demo disk</a> on their store, which I think is just lovely.<p>(If this sounds a lot like shilling, I can assure you I'm not related to the Immich project or FUTO in any way. I'm just a happy user.)<h2 id=why-i-m-running-immich>Why I'm running Immich</h2><p>The short answer is I like self-hosting and open source software and I don't like Google. I'm self-hosting a bunch of other things, some of which I linked above.<aside class=note><p>Actually I'm not running <a rel="nofollow noreferrer external" class=external-link href=https://jellyfin.org/>Jellyfin</a> yet, but I'd like to do so in the near future. I'm planning to upgrade the mainboard of my <a rel="nofollow noreferrer external" class=external-link href=https://frame.work/>Framework 13" laptop</a> and place the old one in <a rel="nofollow noreferrer external" class=external-link href=https://frame.work/products/cooler-master-mainboard-case>a case</a> which will go on my home "rack", and take some of the load off my Raspberry Pi. That poor thing can't handle transcoding movies.<p>Also, my partner wants me to set it up so they can watch the movies by <a rel="nofollow noreferrer external" class=external-link href=https://letterboxd.com/director/nanni-moretti/>Nanni Moretti</a> I have sitting on my home server when they're not at my place. But I'm getting ahead of myself.</aside><p>The long answer involves several old hard drives with photos recovered from dead phones and busted cameras, and still-working phones bursting with photos. The latter are my partner's and my mother's phones. Both of them were often complaining about how they couldn't download a file or take another photo because their phones' storage had run out of space, and I, the most Computer Person of the family, would have to regularly swoop in and save the day by deleting some old files and apps they weren't really using. The old hard drives are my own, and I wasn't keen on losing those old memories.<p>All of us had photo library problems, and something had to be done.<h2 id=setting-up-immich-on-nixos>Setting up Immich on NixOS</h2><p>...is really easy. On <a rel="nofollow noreferrer external" class=external-link href=https://lobste.rs/c/ldgtdn>the Lobste.rs thread</a> of the announcement, <a rel="nofollow noreferrer external" class=external-link href=https://michael.stapelberg.ch/>Michael stapelberg</a> commented that it's as easy as adding this snippet to your NixOS config:<pre class=giallo style=color:#d8dee9;background-color:#2e3440><code data-lang=nix><span class=giallo-l><span style=color:#eceff4>{</span></span>
<span class=giallo-l><span style=color:#8fbcbb>  services</span><span>.</span><span style=color:#8fbcbb>immich</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> {</span></span>
<span class=giallo-l><span style=color:#8fbcbb>    enable</span><span style=color:#81a1c1> = true;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>    host</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> "</span><span style=color:#a3be8c>photos.example.ts.net</span><span style=color:#eceff4>"</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#eceff4>  }</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#eceff4>}</span></span></code></pre><p><a rel="nofollow noreferrer external" class=external-link href=https://kirarin.hootr.club/git/steinuil/flakes>My setup</a> is a bit more complicated than that. First of all I dedicated a spare hard drive to it, which is mounted to Immich's service directory. The <code>wantedBy</code> rule ensures that Immich can only run after the drive has been mounted.<pre class=giallo style=color:#d8dee9;background-color:#2e3440><code data-lang=nix><span class=giallo-l><span style=color:#eceff4>{</span></span>
<span class=giallo-l><span style=color:#8fbcbb>  systemd</span><span>.</span><span style=color:#8fbcbb>mounts</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> [</span></span>
<span class=giallo-l><span style=color:#eceff4>    {</span></span>
<span class=giallo-l><span style=color:#8fbcbb>      type</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> "</span><span style=color:#a3be8c>ext4</span><span style=color:#eceff4>"</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>      what</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> "</span><span style=color:#a3be8c>/dev/sdb2</span><span style=color:#eceff4>"</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>      where</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> "</span><span style=color:#a3be8c>/var/lib/immich</span><span style=color:#eceff4>"</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>      wantedBy</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> [</span></span>
<span class=giallo-l><span style=color:#eceff4>        "</span><span style=color:#a3be8c>immich-server.service</span><span style=color:#eceff4>"</span></span>
<span class=giallo-l><span style=color:#eceff4>      ]</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#eceff4>    }</span></span>
<span class=giallo-l><span style=color:#eceff4>  ]</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#eceff4>}</span></span></code></pre><p>Immich has several features that depend on <a rel="nofollow noreferrer external" class=external-link href=https://docs.immich.app/features/ml-hardware-acceleration>machine learning</a>, which is cool but definitely not something the Raspberry Pi I'm running it on can handle! Luckily for the poor Pi, you can <a rel="nofollow noreferrer external" class=external-link href=https://docs.immich.app/guides/remote-machine-learning>run the ML service on another computer</a> and configure Immich to use it, so this is what my actual Immich config looks like:<pre class=giallo style=color:#d8dee9;background-color:#2e3440><code data-lang=nix><span class=giallo-l><span style=color:#eceff4>{</span></span>
<span class=giallo-l><span style=color:#8fbcbb>  services</span><span>.</span><span style=color:#8fbcbb>immich</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> {</span></span>
<span class=giallo-l><span style=color:#8fbcbb>    enable</span><span style=color:#81a1c1> = true;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>    host</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> "</span><span style=color:#a3be8c>0.0.0.0</span><span style=color:#eceff4>"</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>    openFirewall</span><span style=color:#81a1c1> = true;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>    machine-learning</span><span>.</span><span style=color:#8fbcbb>enable</span><span style=color:#81a1c1> = false;</span></span>
<span class=giallo-l><span style=color:#eceff4>  }</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#eceff4>}</span></span></code></pre><p>The ML service runs on my much beefier desktop. NixOS's Immich module <a rel="nofollow noreferrer external" class=external-link href=https://github.com/NixOS/nixpkgs/issues/436487>doesn't currently support</a> running the ML service separately from Immich, so I had to write my own module for this. You can find the full module <a rel="nofollow noreferrer external" class=external-link href=https://kirarin.hootr.club/git/steinuil/flakes/src/commit/ca508fe53af0edd87d0966f900e6d036a616b671/modules/nixos/immich-ml/default.nix>here</a> (which someday I will try to upstream), but just to give you an idea:<pre class=giallo style=color:#d8dee9;background-color:#2e3440><code data-lang=nix><span class=giallo-l><span style=color:#eceff4>{</span></span>
<span class=giallo-l><span style=color:#616e88>  # module options elided for brevity</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#8fbcbb>  config</span><span style=color:#81a1c1> =</span><span> lib</span><span style=color:#81a1c1>.</span><span>mkIf cfg</span><span style=color:#81a1c1>.</span><span>enable</span><span style=color:#eceff4> {</span></span>
<span class=giallo-l><span style=color:#8fbcbb>    networking</span><span>.</span><span style=color:#8fbcbb>firewall</span><span>.</span><span style=color:#8fbcbb>allowedTCPPorts</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> [</span><span> cfg</span><span style=color:#81a1c1>.</span><span>port</span><span style=color:#eceff4> ]</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#8fbcbb>    systemd</span><span>.</span><span style=color:#8fbcbb>services</span><span>.</span><span style=color:#8fbcbb>immich-ml</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> {</span></span>
<span class=giallo-l><span style=color:#8fbcbb>      after</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> ["</span><span style=color:#a3be8c>network.target</span><span style=color:#eceff4>"]</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>      wantedBy</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> ["</span><span style=color:#a3be8c>multi-user.target</span><span style=color:#eceff4>"]</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>      environment</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> {</span></span>
<span class=giallo-l><span style=color:#8fbcbb>        IMMICH_HOST</span><span style=color:#81a1c1> =</span><span> cfg</span><span style=color:#81a1c1>.</span><span>host</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>        IMMICH_PORT</span><span style=color:#81a1c1> =</span><span style=color:#88c0d0> toString</span><span> cfg</span><span style=color:#81a1c1>.</span><span>port</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>        MACHINE_LEARNING_CACHE_FOLDER</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> "</span><span style=color:#a3be8c>/var/cache/immich-ml</span><span style=color:#eceff4>"</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>        IMMICH_MACHINE_LEARNING_WORKERS</span><span style=color:#81a1c1> =</span><span style=color:#88c0d0> toString</span><span> cfg</span><span style=color:#81a1c1>.</span><span>workers</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>        IMMICH_MACHINE_LEARNING_WORKER_TIMEOUT</span><span style=color:#81a1c1> =</span><span style=color:#88c0d0> toString</span><span> cfg</span><span style=color:#81a1c1>.</span><span>workerTimeout</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>        MPLCONFIGDIR</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> "</span><span style=color:#a3be8c>/var/lib/immich-ml</span><span style=color:#eceff4>"</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#eceff4>      }</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>      serviceConfig</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> {</span></span>
<span class=giallo-l><span style=color:#8fbcbb>        ExecStart</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> "</span><span style=color:#81a1c1>${</span><span>lib</span><span style=color:#81a1c1>.</span><span>getExe cfg</span><span style=color:#81a1c1>.</span><span>package</span><span style=color:#81a1c1>}</span><span style=color:#eceff4>"</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>        StateDirectory</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> "</span><span style=color:#a3be8c>immich-ml</span><span style=color:#eceff4>"</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>        CacheDirectory</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> "</span><span style=color:#a3be8c>immich-ml</span><span style=color:#eceff4>"</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>        DynamicUser</span><span style=color:#81a1c1> = true;</span></span>
<span class=giallo-l><span style=color:#616e88>        # some hardening and nvidia-related options...</span></span>
<span class=giallo-l><span style=color:#eceff4>      }</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#eceff4>    }</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#eceff4>  }</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#eceff4>}</span></span></code></pre><aside class=note><p>I never got it to use my GPU for the ML tasks. There is <a rel="nofollow noreferrer external" class=external-link href=https://github.com/NixOS/nixpkgs/issues/418799>an issue on nixpkgs</a> about this which was closed 2 weeks ago, so I'll have to check the next time I update my flake inputs.<p>And by the way, if you go look at the service definition in my flake you'll see that it's supposed to be a socket-activated service, but I'm not sure that it's working as it's supposed to. Someone who is good at the systemd please help me fix this. <del>my family is dying</del></aside><p>After this you can go on Immich and navigate to <strong>Administration</strong> > <strong>Settings</strong> > <strong>Machine Learning Settings</strong> to add the URL of your ML worker machine.<p>I also set up backups. Backups are super important because I'm not the only user. My partner would be quite sad if I lost their photos due to a busted drive.<p>I'm using <a rel="nofollow noreferrer external" class=external-link href=https://restic.net/>restic</a> and backing up to <a rel="nofollow noreferrer external" class=external-link href=https://www.backblaze.com/cloud-storage>Backblaze B2</a> and another drive, for safety. In my configuration I'm using a helper module I wrote that sources the secrets, repository, and password from files set up by <a rel="nofollow noreferrer external" class=external-link href=https://github.com/Mic92/sops-nix>sops-nix</a>, but this is the moral equivalent:<pre class=giallo style=color:#d8dee9;background-color:#2e3440><code data-lang=nix><span class=giallo-l><span style=color:#eceff4>{</span></span>
<span class=giallo-l><span style=color:#8fbcbb>  services</span><span>.</span><span style=color:#8fbcbb>restic</span><span>.</span><span style=color:#8fbcbb>backups</span><span>.</span><span style=color:#8fbcbb>immich</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> {</span></span>
<span class=giallo-l><span style=color:#8fbcbb>    paths</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> [</span></span>
<span class=giallo-l><span style=color:#eceff4>      "</span><span style=color:#a3be8c>/var/lib/immich</span><span style=color:#eceff4>"</span></span>
<span class=giallo-l><span style=color:#eceff4>    ]</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#616e88>    # The environment file should contain:</span></span>
<span class=giallo-l><span style=color:#616e88>    # AWS_ACCESS_KEY_ID=&lt;key_id from the B2 bucket></span></span>
<span class=giallo-l><span style=color:#616e88>    # AWS_SECRET_ACCESS_KEY=&lt;key_secret from the B2 bucket></span></span>
<span class=giallo-l><span style=color:#8fbcbb>    environmentFile</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> "</span><span style=color:#a3be8c>/super/secret/environment-file</span><span style=color:#eceff4>"</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>    passwordFile</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> "</span><span style=color:#a3be8c>/super/secret/password-file</span><span style=color:#eceff4>"</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>    repository</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> "</span><span style=color:#a3be8c>&lt;repository>/&lt;bucket name></span><span style=color:#eceff4>"</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>    timerConfig</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> {</span></span>
<span class=giallo-l><span style=color:#8fbcbb>      OnCalendar</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> "</span><span style=color:#a3be8c>daily</span><span style=color:#eceff4>"</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>      Persistent</span><span style=color:#81a1c1> = true;</span></span>
<span class=giallo-l><span style=color:#eceff4>    }</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#eceff4>  }</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#eceff4>}</span></span></code></pre><p>Finally, I used a <a rel="nofollow noreferrer external" class=external-link href=https://tailscale.com/kb/1223/funnel>Tailscale Funnel</a> to expose it to the internet, so that my relatives could use it without setting up Tailscale on their devices. I wrote a very simple service to take care of this:<pre class=giallo style=color:#d8dee9;background-color:#2e3440><code data-lang=nix><span class=giallo-l><span style=color:#eceff4>{</span></span>
<span class=giallo-l><span style=color:#8fbcbb>  systemd</span><span>.</span><span style=color:#8fbcbb>services</span><span>.</span><span style=color:#8fbcbb>tailscale-funnel-immich</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> {</span></span>
<span class=giallo-l><span style=color:#8fbcbb>    description</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> "</span><span style=color:#a3be8c>Tailscale Funnel forwarding for Immich</span><span style=color:#eceff4>"</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#616e88>    # https://old.reddit.com/r/Tailscale/comments/ubk9mo/systemd_how_do_get_something_to_run_if_tailscale/jia3pwn/</span></span>
<span class=giallo-l><span style=color:#8fbcbb>    after</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> [</span></span>
<span class=giallo-l><span style=color:#eceff4>      "</span><span style=color:#a3be8c>sys-subsystem-net-devices-tailscale0.device</span><span style=color:#eceff4>"</span></span>
<span class=giallo-l><span style=color:#eceff4>      "</span><span style=color:#a3be8c>tailscaled.service</span><span style=color:#eceff4>"</span></span>
<span class=giallo-l><span style=color:#eceff4>      "</span><span style=color:#a3be8c>immich-server.service</span><span style=color:#eceff4>"</span></span>
<span class=giallo-l><span style=color:#eceff4>    ]</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#8fbcbb>    wantedBy</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> [ "</span><span style=color:#a3be8c>multi-user.target</span><span style=color:#eceff4>" ]</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l></span>
<span class=giallo-l><span style=color:#8fbcbb>    serviceConfig</span><span>.</span><span style=color:#8fbcbb>ExecStart</span><span style=color:#81a1c1> =</span><span style=color:#eceff4> "</span><span style=color:#81a1c1>${</span><span>lib</span><span style=color:#81a1c1>.</span><span>getExe config</span><span style=color:#81a1c1>.</span><span>services</span><span style=color:#81a1c1>.</span><span>tailscale</span><span style=color:#81a1c1>.</span><span>package</span><span style=color:#81a1c1>}</span><span style=color:#a3be8c> funnel </span><span style=color:#81a1c1>${builtins.</span><span style=color:#88c0d0>toString</span><span> config</span><span style=color:#81a1c1>.</span><span>services</span><span style=color:#81a1c1>.</span><span>immich</span><span style=color:#81a1c1>.</span><span>port</span><span style=color:#81a1c1>}</span><span style=color:#eceff4>"</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#eceff4>  }</span><span style=color:#81a1c1>;</span></span>
<span class=giallo-l><span style=color:#eceff4>}</span></span></code></pre><p>And that's it! I've only ever had two issues with this setup.<ul><li>Every once in a while, the Tailscale session on my Pi expires and that makes the funnel inaccessible... I should probably set up some sort of notification for that.<li>I don't run upgrades on the Pi very often, so I ran into a <a rel="nofollow noreferrer external" class=external-link href=https://docs.immich.app/errors/#typeorm-upgrade>migration issue</a> that only happened if you skipped versions between v1.132.3 and v1.137.0. To fix it I had to pin a version of nixpkgs that packaged an intermediate version of Immich, deploy it on the Pi, wait for it to migrate, and then upgrade again to the latest version.</ul><p>Overall it's been a very low maintenance setup.<h2 id=using-immich>Using Immich</h2><p>I'm sure you could tell from the introduction of this post, but I think Immich is really good! My partner uploaded all their photos and they're very happy with it. Unfortunately at some point my mother caved in to the pressure and subscribed to Google One, and I still haven't bothered to talk her out of it.<p>I have uploaded all of my photos to it, an archive going back to 2014. The web UI makes it easy and quick to scroll and jump around the timeline; it has brought me back to many good memories. I also like the actual "memory" feature which finds photos you took on the same calendar day the previous years and shows them on top of the gallery. I haven't used any software to organize my photos since <a rel="nofollow noreferrer external" class=external-link href=https://en.wikipedia.org/wiki/Picasa>Picasa</a> was still a thing. Immich made me remember how nice that can be.<p>There's a lot of other things I enjoy so I'll quickly go through them in a list:<ul><li>The reverse geocoding features are fun and useful. I like how I can see all the places I've taken photos in plotted on a map, and it's helped me remember holidays and good restaurants.<li>Maybe this tells you more about me than about Immich, but the <a rel="nofollow noreferrer external" class=external-link href=https://docs.immich.app/features/searching>contextual CLIP search</a> kinda feels like magic. I can just search for "cat" and it'll show me all the cat photos I've ever taken! Unbelievable.<li>Facial recognition requires some manual fixing sometimes, but I like it! It's fun to see how my friends used to look like 8 years ago.<li>You can share albums between different users and also create external links with an expiration date that allow anybody with the link to upload their photos. I used this a bunch of times to share photos with friends I went on vacation with.<li>This is not exactly a feature of Immich itself, but I like that the team behind Immich shares the "cursed knowledge" they came across while building Immich <a rel="nofollow noreferrer external" class=external-link href=https://immich.app/cursed-knowledge>on a page on the website</a>.</ul><p>In conclusion: I think you should give Immich a try! Don't let big corporations use your memories as training data for their torment nexi. Take control of your data. There are alternatives for most of the services you use regularly and they're actually really nice. Support those instead of throwing money at a subscription service.<p>Thank you for reading, have <a rel="nofollow noreferrer external" class=external-link href=https://soundcloud.com/sozenotsubo/kioku>a song I like</a>.</div></article></main><footer class=main><a class=logo href=/> <svg viewbox="0 0 79 49" version=1.1 xmlns=http://www.w3.org/2000/svg xmlns:svg=http://www.w3.org/2000/svg><title>Steen's online burrow</title><g fill=currentColor><g><path d="M 17,7 V 9 H 15 V 8 h -1 v 3 h 1 v 1 h 2 v 1 h 4 V 9 H 20 V 8 H 19 V 5 h 1 V 4 h 1 V 3 h 4 v 1 h -3 v 3 h 1 v 1 h 1 v 4 h -1 v 1 h -1 c 0,0 0,1 0,1 H 16 V 13 H 13 V 12 10 H 12 V 8 h 1 V 7 Z"/><path d="m 30,5 v 1 h 2 V 5 h 3 v 1 h -2 v 1 h -2 v 4 h -1 v 1 h -1 v 1 h -1 c 0,0 0,2 0,2 h -1 c 0,0 0,1 0,1 h -1 v -3 h 1 v -2 h 1 V 7 H 26 V 6 H 24 V 5 Z"/><path d="m 39,5 v 2 h -1 c 0,0 0,1 0,1 h -1 c 0,0 0,1 0,1 h -2 v 1 h 4 c 0,0 0,2 0,2 h -2 v -1 h -3 v 1 h -1 v 2 h 2 v -1 h 3 v 1 h 1 v 1 h 1 c 0,0 0,1 0,1 h -2 v -1 h -4 c 0,0 0,1 0,1 h -4 v -1 h 1 v -2 h 1 v -2 h 1 V 8 h 3 V 7 h 1 V 6 h 1 V 5 Z"/><path d="m 42,5 v 1 h 1 v 1 h 1 v 1 h 1 v 1 h 2 v 1 H 44 V 9 h -1 v 2 h 3 v 1 h -2 v 1 h -1 v 1 h 2 v -1 h 2 v 2 h -4 c 0,0 0,1 0,1 h -2 v -2 h 1 V 9 H 41 V 7 H 40 V 5 Z"/><path d="m 48,6 v 2 h 1 v 4 h 1 c 0,0 0,2 0,2 h -1 v 3 c 0,0 1,0 1,0 v -1 h 1 v -2 h 1 v -2 h 1 v 1 h 1 v 1 h 1 v 1 h 2 V 14 H 56 V 9 h 1 V 7 h 1 V 5 h 1 V 4 h 1 V 2 h -1 v 1 h -2 v 1 h -1 v 4 h -1 v 4 H 54 V 11 H 53 V 10 H 51 V 8 H 50 V 7 H 49 V 6 Z"/><path d="m 61,0 v 1 h 1 v 3 h 2 V 2 H 63 V 0 Z"/><path d="m 67,4 v 1 h -1 v 2 h 1 c 0,0 0,3 0,3 h -1 v 1 c 0,0 -4,0 -4,0 v -1 h 2 V 9 h 1 V 8 H 64 V 5 h 1 V 4 Z"/></g><g><path d="m 26,22 h 3 v -1 h -3 z"/><path d="m 31,20 v 1 h 1 v 1 h 1 v -2 z m 1,2 h -1 v -1 h -1 v 2 h 2 z"/><path d="m 34,20 v 3 h 1 v -2 h 1 v 2 h 1 v -2 h -1 v -1 z"/><path d="m 38,19 v 4 h 1 v -4 z"/><path d="m 40,19 v 1 h 1 v -1 z"/><path d="m 40,21 v 2 h 1 v -2 z"/><path d="m 42,23 v -3 h 2 v 1 h 1 c 0,0 0,2 0,2 h -1 v -2 h -1 v 2 z"/><path d="m 46,21 v 2 h 1 v 1 h 1 v -1 h -1 v -2 h 1 v 1 h 1 v -2 h -2 v 1 z"/><path d="m 50,21 c 0,0 0,1 0,1 h 3 v -1 z"/></g><g><path d="m 5,26 v 1 H 4 v 6 H 3 v 7 H 2 v 4 H 1 v 2 H 0 v 3 h 6 v -1 h 2 v -1 h 2 v -1 h 2 v -1 h 2 v -4 h -1 v -1 h -1 v -2 h 1 v -2 h 1 v -1 h 1 v -1 h 1 V 28 H 12 V 27 H 9 v -1 z m 2,4 h 2 v 1 h 3 v 2 h -1 v 1 h -1 v 1 H 9 v 1 H 8 v 1 H 6 V 36 H 7 Z M 6,41 h 2 v 1 h 2 v 1 H 8 v 1 H 6 v 1 H 5 v -2 h 1 z"/><path d="m 17,26 v 3 h 1 v 2 h -1 v 5 h -1 v 4 h -1 v 4 h 1 v 2 h 9 v -1 h 1 v -3 h 1 V 25 h -4 v 5 h 1 v 9 h -1 v 3 h -1 v 1 h -3 v -4 h 1 v -5 h 1 v -8 z"/><path d="m 28,27 v 5 h 1 v 2 h -1 v 14 h 3 V 38 h 1 v 4 h 1 v 4 h 1 v 2 h 3 v -5 h -1 v -4 h -1 v -5 h 3 v -6 h -2 v -1 z m 4,3 h 1 v 1 h -1 z"/><path d="m 40,27 v 21 h 3 V 37 h 1 v 1 h 1 v 1 h 1 v 1 h 1 v 2 h 1 v 1 h 1 v 2 h 4 v -3 h -1 v -1 h -1 v -2 h -1 v -1 h -1 v -1 h -1 v -9 h -2 v -1 z m 3,4 h 2 v 1 h -1 v 1 h -1 z"/><path d="m 52,27 v 1 h -1 v 1 h -1 v 7 h 1 v 1 h 1 v 1 h 1 v 1 h 5 v -1 h 2 v -1 h 1 v -8 h -1 v -1 h -4 v -1 z m 2,4 h 3 v 1 h 1 v 2 h -1 v 1 h -2 v -1 h -1 v -1 h -1 v -1 h 1 z"/><path d="m 63,25 v 4 h 1 v 16 h 4 v -1 h 1 v -1 h 1 v -2 h 2 v 1 h 2 v 1 h 1 v 1 h 4 v -5 h -1 v -3 h -1 v -2 h -1 v -2 h -1 v -2 h -1 v -2 h -1 v -3 h -1 v -1 h -3 v 4 h 1 v 3 h 1 v 2 h 1 v 2 h 1 v 2 h 1 v 1 h -1 v -1 h -4 v 1 H 67 V 26 h -1 v -1 z"/></g></g></svg> </a><div class=blurb>There is no end though there is a start in the past — Infinity.<br> It speaks, it ruins, and it goes though it consumes the soul — Finite.<br> Only the person who has wisdom can read the most foolish one from the history.<br> The daemon that lives in the machine doesn't understand the daemon that lives in the brain.<br> It is funnier that man exceeds the speed of light than machine start writing on a net.<br> It can be said that this is final ultimatum from the people who can think.</div></footer></div>